{% extends 'base.html' %}

{% block content %}
  <h2>My Files</h2>

  <form method="get">
    <label>Filter by category:</label>
    <select name="category" onchange="this.form.submit()">
      <option value="">All</option>
      <option value="image" {% if request.GET.category == 'image' %}selected{% endif %}>Images</option>
      <option value="document" {% if request.GET.category == 'document' %}selected{% endif %}>Documents</option>
      <option value="video" {% if request.GET.category == 'video' %}selected{% endif %}>Video</option>
      <option value="other" {% if request.GET.category == 'other' %}selected{% endif %}>Other</option>
    </select>
  </form>

  <ul>
    {% for file in files %}
      <li>
        <strong>{{ file.category|title }}</strong> — 
        <a href="{{ file.file.url }}" target="_blank">{{ file.file.name }}</a> ({{ file.uploaded_at|date:"d.m.Y H:i" }})
      </li>
    {% empty %}
      <li>There is no files.</li>
    {% endfor %}
  </ul>

  <a href="{% url 'file_app:upload_file' %}">← Back to upload</a>

{% endblock %}
